{% set page_width = '1200px' %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Craft-Life - Сервер Minecraft!{% endblock %}</title>
        {% block stylesheets %}{% endblock %}
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
        <link rel="stylesheet" type="text/css" href="{{ asset('css/bootstrap.min.css') }}">
        <link rel="stylesheet" type="text/css" href="{{ asset('css/site/base.css') }}">
        <script type="text/javascript" src="{{ asset('js/jquery-3.2.1.min.js') }}"></script>
        <script type="text/javascript" src="{{ asset('js/bootstrap.min.js') }}"></script>
        <script type="text/javascript" src="{{ asset('js/angular.min.js') }}"></script>
        <script type="text/javascript" src="{{ asset('js/angular-sanitize.min.js') }}"></script>
        <script type="text/javascript" src="{{ asset('js/angular-animate.min.js') }}"></script>
        <script type="text/javascript" src="{{ asset('js/app/main.js') }}"></script>
        <script type="text/javascript" src="{{ asset('js/app/post.js') }}"></script>
        <script type="text/javascript" src="{{ asset('js/app/servers.js') }}"></script>
        {% block jsincludes %} {% endblock %}
    </head>
    <body ng-app="mainApp">
        <div class="background-image"></div>
        <nav class="navbar navbar-inverse center-block">
            <div class="container upper-panel">
                <span style="font-size: 30pt; color: white;">CRAFT-LIFE</span>
            </div>
            <div class="container-fluid">
                <!--<div class="navbar-header">
                    <a class="navbar-brand" href="/">CRAFT-LIFE</a>
                </div>-->
                <div class="collapse navbar-collapse" id="clNavbar">
                    <ul class="nav navbar-nav">
                        <li><a href="/">Главная</a></li>
                        <li><a href="{{ url('work_in_progress') }}">Форум</a></li>
                        <li><a class="dropdown-toggle" data-toggle="dropdown" href="#">Сервера<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="{{ url('info', {'action': 'server-classic'}) }}">Classic</a></li>
                                <li><a href="{{ url('info', {'action': 'server-mini-games'}) }}">Mini-Games</a></li>
                            </ul>
                        </li>
                        <li><a class="dropdown-toggle" data-toggle="dropdown" href="#">Информация<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="{{ url('info', {'action': 'commands'}) }}">Игровые команды</a></li>
                                <li><a href="{{ url('info', {'action': 'faq'}) }}">FAQ</a></li>
                                <li><a href="{{ url('info', {'action': 'admins'}) }}">Администрация</a></li>
                                <li><a href="{{ url('info', {'action': 'about'}) }}">О проекте</a></li>
                                <li><a href="{{ url('info', {'action': 'banned'}) }}">Бан-лист</a></li>
                            </ul>
                        </li>
                        <li><a href="{{ url('info', {'action': 'rules'}) }}">Правила</a></li>
                        <li><a href="{{ url('services') }}">Услуги</a></li>
                        {% if is_granted('ROLE_ADMIN') %}
                            <li><a class="dropdown-toggle" data-toggle="dropdown" href="#">Админка<span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li><a href="{{ url('admin/users') }}">Юзеры</a></li>
                                    <li><a href="{{ path("post") }}">Создать пост</a></li>
                                </ul>
                            </li>
                        {% endif %}
                    </ul>

                    <ul class="nav navbar-nav navbar-right">
                        {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                            <li>
                                <a style="font-size: 14pt; display: inline;" href="{{ url('userpage', {'id': app.user.id}) }}">{{app.user.username}}</a>
                                <button type="button" class="btn btn-info btn-lg" onclick="window.location='{{ logout_path('main') }}'">Выход</button>
                            </li>
                        {% else %}
                            <li>
                                <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#loginModal">Вход</button>
                                <button type="button" class="btn btn-info btn-lg" onclick="window.location = '{{ url('register') }}';" >Регистрация</button>
                            </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>


        {% if error is defined %}
            <p style="color: red; background-color: #684646;">{{ error }}</p>
        {% endif %}
        <div class="container-fluid body-main" style="width: {{ page_width }}; padding: 0px;">
            <div class="row content">
                <div class="col-sm-8 text-left">
                    {% block body %}{% endblock %}
                </div>
                <div class="col-sm-4">
                    <div ng-controller="serversController" class="primary-panel" style="width: 375px;">
                        <div align="center">
                            <button type="button" class="btn btn-lg download-btn" onclick="window.location='{{ asset('downloads/Launcher.jar') }}'">Скачать лаунчер</button>
                        </div>
                        <br />
                        <span style="font-size: 20pt; color: #ff9400">Сервера</span><hr/>
                        <table class="table table-striped">
                            <tr>
                                <td><p ng-bind-html="description"></p></td>
                                <td>
                                    <span style="font-size: 14pt;">{[{players}]} / {[{maxPlayers}]}</span>
                                    &nbsp;<button class="btn-info btn-sm">Info</button>
                                </td>
                            </tr>
                            <tr>
                                <td><button class="btn btn-info" ng-click="updateServers();">Обновить</button></td>
                                <td></td>
                            </tr>
                        </table>
                        <hr />
                        <div align="center">
                            <iframe src="https://discordapp.com/widget?id=366258717404037120&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0"></iframe>
                            <script type="text/javascript" src="//vk.com/js/api/openapi.js?149"></script>

                            <!-- VK Widget -->
                            <div id="vk_groups"></div>
                            <script type="text/javascript">
                                VK.Widgets.Group("vk_groups", {mode: 3, width: "350"}, 30516292);
                            </script>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-8">
                    <div id="d_footer" class="footer-panel">{% block footer %}{% endblock %}</div>
                </div>
            </div>
        </div>

        <div id="loginModal" class="modal fade center-block" role="dialog" style="width: 400px; display: none;">
            <div class="modal-content">
                <form action="{{ path('login') }}" method="POST">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Вход</h4>
                    </div>
                    <div class="modal-body">
                        <input name="username" type="text" placeholder="Логин" class="form-control"/>&nbsp;
                        <br /><input name="password" type="password" placeholder="Пароль" class="form-control"/>
                        <br/>
                    </div>
                    <div class="modal-footer">
                        <a href="/register">Регистрация</a>&nbsp;<button type="submit"  name="login" class="btn btn-default">Вход</button>
                    </div>
                </form>
            </div>
        </div>

        {% block javascripts %}{% endblock %}
    </body>
</html>
